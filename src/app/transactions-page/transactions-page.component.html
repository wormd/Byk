<div class="">
  <ul ngbNav #nav="ngbNav" class="nav-tabs">
    <li ngbNavItem>
      <a ngbNavLink>Add Transaction</a>
      <ng-template ngbNavContent>
        <app-transaction-form [accounts]="accounts"></app-transaction-form>
      </ng-template>
    </li>
    <li ngbNavItem>
      <a ngbNavLink>Add Account</a>
      <ng-template ngbNavContent>
        <app-account-form [accounts]="accounts"></app-account-form>
      </ng-template>
    </li>
  </ul>
  <div [ngbNavOutlet]="nav" class="border-right border-left border-bottom"></div>
  <div *ngIf="accounts">

    <nav class="navbar pr-0 pl-0">
      <div class="d-flex mr-auto">
        <div class="my-auto mr-2">Filter by:</div>
        <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" [(ngModel)]="filterby">
          <label ngbButtonLabel class="btn-primary">
            <input ngbButton type="radio" value="date" (click)="filterByClick()">Date
          </label>
          <label ngbButtonLabel class="btn-primary">
            <input ngbButton type="radio" value="created" (click)="filterByClick()">Created
          </label>
        </div>
      </div>
      <div class="ml-2 mt-auto">
        <app-month-bar ></app-month-bar>
      </div>
      <div class="ml-2 mt-auto">
        <app-year-bar></app-year-bar>
      </div>
    </nav>

    <table class="table table-bordered table-striped">
      <thead>
      <tr>
        <th scope="col">Created</th>
        <th scope="col" style="width: 8%">Date</th>
        <th scope="col" style="width: 60%">Description</th>
        <th scope="col" style="">Amount</th>
        <th scope="col">Origin</th>
        <th scope="col">Target</th>
        <th scope="col">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngIf="!transactions" class="spinner-border" role="status">
        <td class="d-flex justify-content-center sr-only" colspan="5">Loading...</td>
      </tr>
      <tr *ngIf="transactions && transactions.length === 0" role="status">
        <td colspan="5" class="text-center">This period is empty</td>
      </tr>
      <tr *ngFor="let line of transactions; let i = index" class="pt-1 pb-1">
        <td>{{ line.created | date:'yyyy/MM/dd hh:mm' }}</td>
        <td>{{ line.date }}</td>
        <td>{{ line.descr }}</td>
        <td [ngClass]="{'text-danger':line.amount<0}">&euro; {{ line.amount | beautifyNum }}</td>
        <td>{{ getAccountName(line.origin) }}</td>
        <td>{{ getAccountName(line.target) }}</td>
        <td><button type="button" class="btn fa fa-info bg-transparent"></button>
          <button type="button" class="btn fa fa-times bg-transparent" (click)="onClickDelete(i)"></button></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
